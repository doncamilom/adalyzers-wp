<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ADAlyzers super cool project - Wikispeedia: An exploration into human strategy through path navigation.</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">ADAlyzers super cool project</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#wikispeedia-what-does-x-have-to-do-with-y-you-better-find-out" id="toc-wikispeedia-what-does-x-have-to-do-with-y-you-better-find-out" class="nav-link active" data-scroll-target="#wikispeedia-what-does-x-have-to-do-with-y-you-better-find-out">Wikispeedia: What does X have to do with Y? You better find out!</a>
  <ul class="collapse">
  <li><a href="#players-as-humans" id="toc-players-as-humans" class="nav-link" data-scroll-target="#players-as-humans">Players as humans</a>
  <ul class="collapse">
  <li><a href="#strategies-and-attitudes" id="toc-strategies-and-attitudes" class="nav-link" data-scroll-target="#strategies-and-attitudes">Strategies and attitudes</a></li>
  </ul></li>
  <li><a href="#a-look-into-the-collected-data" id="toc-a-look-into-the-collected-data" class="nav-link" data-scroll-target="#a-look-into-the-collected-data">A look into the collected data…</a></li>
  </ul></li>
  <li><a href="#jeff-add-interesting-visualizationscrispy-distributions-you-got-from-the-exploration-of-the-data" id="toc-jeff-add-interesting-visualizationscrispy-distributions-you-got-from-the-exploration-of-the-data" class="nav-link" data-scroll-target="#jeff-add-interesting-visualizationscrispy-distributions-you-got-from-the-exploration-of-the-data">JEFF add interesting visualizations/crispy distributions you got from the exploration of the data</a>
  <ul class="collapse">
  <li><a href="#a-closer-look-into-the-collected-data-hunt-for-covariates" id="toc-a-closer-look-into-the-collected-data-hunt-for-covariates" class="nav-link" data-scroll-target="#a-closer-look-into-the-collected-data-hunt-for-covariates">A closer look into the collected data: hunt for covariates</a></li>
  </ul></li>
  <li><a href="#a-matching-study" id="toc-a-matching-study" class="nav-link" data-scroll-target="#a-matching-study">A matching study</a>
  <ul class="collapse">
  <li><a href="#finally-the-real-deal-is-there-a-programmatic-way-to-win-this-game" id="toc-finally-the-real-deal-is-there-a-programmatic-way-to-win-this-game" class="nav-link" data-scroll-target="#finally-the-real-deal-is-there-a-programmatic-way-to-win-this-game">Finally, the real deal, is there a programmatic way to win this game?</a></li>
  <li><a href="#yes-and-no" id="toc-yes-and-no" class="nav-link" data-scroll-target="#yes-and-no">YES and NO</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Wikispeedia: An exploration into human strategy through path navigation.</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<hr>
<section id="wikispeedia-what-does-x-have-to-do-with-y-you-better-find-out" class="level1">
<h1>Wikispeedia: What does X have to do with Y? You better find out!</h1>
<p>Since the earliest records, humans have wandered across endless lands and walked thorugh mysterious paths, in an attempt to uncover the unexplored and find better conditions for their tribes. The rise of agriculture and the industrial era has, however, changed things, turning us into bare sedentary animals… until now!</p>
<p><img src="images/heComputer.gif" class="img-fluid"></p>
<p><a href="https://dlab.epfl.ch/wikispeedia/play/">Wikispeedia</a> is an easy and fun game: you are given two Wikipedia articles, and starting from the first article, your goal is to reach the second one exclusively by clicking links in the articles you encounter, effectively letting you explore your own paths across the vast Wikipedia network, for free! Your game data is collected by <a href="https://dlab.epfl.ch/">The EPFL Data Science Lab</a>, which helps us and them better understand some aspects of human behaviour 😉.</p>
<p>Using this data, we ask ourselves, are there patterns in the way players navigate the network, that make them more successful? That is, is there any optimal strategy that doesn’t require extensive knowledge of the network?</p>
<p>Players are faced with multiple stimuli during the playing session, and players’ decisions as well as their subsequent success may be influenced by them. For example, users might navigate the network through <code>semantic similarity</code> optimization, or they might just click the links found in <code>images</code> or <code>tables</code>, etc.</p>
<p>Do these particular features have any effect on players’ success? Let’s find out!</p>
<hr>
<section id="players-as-humans" class="level2">
<h2 class="anchored" data-anchor-id="players-as-humans">Players as humans</h2>
<section id="strategies-and-attitudes" class="level3">
<h3 class="anchored" data-anchor-id="strategies-and-attitudes">Strategies and attitudes</h3>
<p>Being the Wikispeedia game and <strong>individual</strong> and <strong>timed game</strong>, players responses to the challenge it serves are miscellaneous. Individuals may <strong>consciously</strong> come up with a <strong>strategy</strong> to tackle the task they are assigned to, or <strong>unintentionally</strong> manifest a <strong>behavior</strong> that could be observed by scrupulous data analysts, like us. The Wikispeedia game itself was designed to extrapolate information allowing the computation of semantic distance between real-world concepts, to be leveraged in intelligent applications. Less ambitiously, we’re interest in outlining players mutual attitudes and the likeliness these <strong>lead</strong> them to <strong>succeed in the game</strong>, potentially a causal relationship. Among the manifold performable strategies we hypothesised the following: - clicking on hyperlinks showing up at the <strong>top</strong> of the article page; - clicking on hyperlinks showing up in <strong>image captions</strong>; - clicking hyperlinks that are <strong>semantically related</strong> to the current article;<br>
- clicking hyperlinks that are semantically related to the <strong>target article</strong>.</p>
<p><em>Look at the webpage below, isn’t your gaze naturally directed towards those velvet red petals?</em> This is what we’re talking about.</p>
<p><img src="images/Aesthetics.png" class="img-fluid"></p>
<p>As “the Parthenon’s facade” showing a marvellous “interpretation of golden rectangles in its proportions” is judged to be aesthetically valuable by humans ability to discriminate at a sensory level, it is also true that <strong>visual content attracts human attention</strong> more than raw text.</p>
<p>Additionally, picture yourself in a <strong>competitive framework</strong>, with a stopwatch in your left hand and your right trembling fingers on a mouse, determined to break down the shortest ever recorded Wikispeedia game and be remembered for eternity. Wouldn’t you click on <strong>top-positioned hyperlinks</strong> or would you parse the article in search for the best catch?</p>
<div class="cell" data-source="https://radionotas.com/2021/04/16/10-errores-comunes-de-un-locutor-de-radio/" data-execution_count="1">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.display <span class="im">import</span> Image</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>Image(<span class="st">'images/stressed.jpg'</span>, width<span class="op">=</span><span class="dv">400</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="1">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="datastory_files/figure-html/cell-3-output-1.jpeg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">In a competitive framework, players have the additional stress of finishing the game <em>fast</em>; information in an easily diggestible format, like images, provide an easy and quick shortcut to progress.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<section id="indeed-this-is-the-case-at-least-for-the-majority-of-players." class="level4">
<h4 class="anchored" data-anchor-id="indeed-this-is-the-case-at-least-for-the-majority-of-players.">Indeed, this is the case, at least for the majority of players.</h4>
<div class="cell" data-execution_count="2">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>Image(<span class="st">'images/Distribution_clickability_preference_img.png'</span>, width<span class="op">=</span><span class="dv">500</span>,height<span class="op">=</span><span class="dv">600</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="2">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="datastory_files/figure-html/cell-4-output-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Players seem to be very attracted to links close to images (1 in the plot).</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>The graphs can be read as follows: the heights of the columns represent a measure of how trendy the target behavior is among players; the left-sided column, per behavior, is the distribution among unsuccessful players, while the right-sided is the one among successful players*.</p>
<p>It is evident that clicking hyperlinks showing up in <strong>image captions</strong> is a <strong>trendy behavior</strong> for Wikispeedia players, especially among the <strong>successful</strong>. The rate of successful players clicking on images’ captions is roughly 4 times the unsuccessful players one.</p>
<div class="cell" data-execution_count="3">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>Image(<span class="st">'images/Distribution_clickability_preference_pos.png'</span>, width<span class="op">=</span><span class="dv">500</span>,height<span class="op">=</span><span class="dv">600</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="3">
<p><img src="datastory_files/figure-html/cell-5-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Again, it is evident that clicking on hyperlinks showing up at the <strong>top of an article</strong> is largely trendier than clicking on hyperlinks elsewhere positioned in the article text (4 to 5 times more common). The gap between successful and unsuccesful players is not that large to show a pattern.</p>
<p>However these are just <em>distributions</em>, i.e.&nbsp;a <strong>fair picture of reality</strong>, they show trends, no conclusions can be driven still. <br> *for a better understading of the graph (e.g.&nbsp;magnitudes of the column heights, units of measurements, etc.) see the notebook project_adalyzers.ipynb.</p>
</section>
<section id="eye-catcher-hyperlinks-instinctual-urge-to-be-turned-down-or-smart-way-to-go" class="level4">
<h4 class="anchored" data-anchor-id="eye-catcher-hyperlinks-instinctual-urge-to-be-turned-down-or-smart-way-to-go">Eye-catcher hyperlinks: instinctual urge to be turned down or smart way to go?</h4>
<p>In addition to this crispy question, we ask you, dear reader, to wait some time more for the statistical inference you’re craving for, and dig a little deeper into human natural language structural traits.</p>
<p>A little trickier to understand: <strong>semantic similarity</strong>. Semantic similarity is a metric that evaluates the distance between items on the basis of the <strong>likeness of their meaning</strong> or semantic content. Humans at play, challenged to reach a target article, whereof the only information they’re provided with is a word or phrase, display common sense knowledge. They would, in fact, look for semantic <strong>relatedness</strong> in clicking the hyperlinks. Thinking of the <strong>hypertextual Wikipedia graph</strong> alone, it can be viewed as a primitive semantic <strong>network</strong>: articles represent the concepts and the hyperlinks are the means of connection between them. Two articles can be more or less “semantically related” if, naivly, the two “overlap” well, with regard to the words present in them and the way they are ordered or used in context.</p>
<p>An illustration of the structure of the Wikispeedia hypertextual graph is shown in the image below (a part of it). The path between the source article “mathematics” to the target article “Alan Touring” is pictured. The grey arrows connect nodes (i.e.&nbsp;hyperlinks) of a human path with length equal to 3, while the black arrows connect nodes of the shortest existing path between source and target articles, with length equal to 2.</p>
<div class="cell" data-execution_count="4">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>Image(<span class="st">"images/path.png"</span>, width<span class="op">=</span><span class="dv">600</span>, height<span class="op">=</span><span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="4">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="datastory_files/figure-html/cell-6-output-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">There are many ways of solving a puzzle. The optimal (black) doesn’t always make sense. A way for it to make sense is to click the article most similar to the current one (green path: sequential similarity increase), or click the article that is most similar to the target article (yellow path: target similarity increase). As shown by the intensity of the color, similarity increases in these paths as the player approaches the goal article.</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="semantic-similarity-the-paths-that-make-sense." class="level4">
<h4 class="anchored" data-anchor-id="semantic-similarity-the-paths-that-make-sense.">Semantic similarity: the paths that ‘make sense’.</h4>
<p>An attitude it is reasonable to suppose players would perform, is to click on hyperlinks that are semantically closer and closer, along the human path, to the target article. The yellow arrows visualize these weighted conncetions, a.k.a. distances evaluated with the semantic similarity metric.</p>
<p>A smarter way could be to click on articles linked by increasing similarity between every two neighbouring along the path. The green arrows visualize the latters. <br></p>
<p><strong>“These paths make sense, however, is this really the way the games are played? Is this actually effective w.r.t. success?”</strong></p>
<p>Let us explore the data and answer to these questions.</p>
</section>
</section>
</section>
<section id="a-look-into-the-collected-data" class="level2">
<h2 class="anchored" data-anchor-id="a-look-into-the-collected-data">A look into the collected data…</h2>
<p>What data do we have though? How hard are the tasks our brave users had to overcome? Let’s quickly explore this.</p>
</section>
</section>
<section id="jeff-add-interesting-visualizationscrispy-distributions-you-got-from-the-exploration-of-the-data" class="level1">
<h1>JEFF add interesting visualizations/crispy distributions you got from the exploration of the data</h1>
<section id="maybe-explain-less-naively-the-semantic-similarity-metric-optional" class="level4">
<h4 class="anchored" data-anchor-id="maybe-explain-less-naively-the-semantic-similarity-metric-optional">maybe explain less naively the semantic similarity metric (optional)</h4>
<div class="cell" data-execution_count="5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># take a look at the shortest_path distributions</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>final_df <span class="op">=</span> pd.read_csv(<span class="st">'processed/final_df_curv_feats.csv'</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">2</span>,<span class="dv">1</span>, </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>                       figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">8</span>), </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                       gridspec_kw<span class="op">=</span>{<span class="st">"hspace"</span>:<span class="fl">0.3</span>})</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">"font.size"</span>] <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>sns.barplot(data<span class="op">=</span>(final_df</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>                  .groupby([<span class="st">"shortest_path_length"</span>, </span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"is_successful"</span>])[<span class="st">'path'</span>]</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>                  .count()</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>                  .reset_index()</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>                 ),</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>            y<span class="op">=</span><span class="st">"path"</span>, </span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>            x<span class="op">=</span><span class="st">"shortest_path_length"</span>, </span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>            hue<span class="op">=</span><span class="st">"is_successful"</span>,</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>            ax<span class="op">=</span>ax[<span class="dv">0</span>], </span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>            palette<span class="op">=</span>[<span class="st">"#b2df8a"</span>, <span class="st">"#1f78b4"</span>])</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_ylabel(<span class="st">'Absolute Counts'</span>)<span class="op">;</span> </span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_xlabel(<span class="st">'Shortest Path'</span>)<span class="op">;</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_title(<span class="st">"1. Optimal lengths of the proposed games."</span>)</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a><span class="co">#Count of human paths, stratified by shortest possible path")</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].legend(loc<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_ylabel(<span class="st">'Absolute Counts'</span>) </span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_xlabel(<span class="st">'Shortest Path'</span>)</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>sns.barplot(data<span class="op">=</span>(final_df.query(<span class="st">"shortest_path_length==4"</span>)</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>                  .groupby([<span class="st">"human_path_length"</span>, </span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"is_successful"</span>])[<span class="st">'path'</span>]</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>                  .count()</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>                  .reset_index()</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>                 ),</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>            y<span class="op">=</span><span class="st">"path"</span>, </span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>            x<span class="op">=</span><span class="st">"human_path_length"</span>, </span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>            hue<span class="op">=</span><span class="st">"is_successful"</span>,</span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>            ax<span class="op">=</span>ax[<span class="dv">1</span>], </span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>            palette<span class="op">=</span>[<span class="st">"#b2df8a"</span>, <span class="st">"#1f78b4"</span>])</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_xlim(<span class="op">-</span><span class="fl">0.5</span>,<span class="fl">10.5</span>)</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_ylabel(<span class="st">'Absolute Counts'</span>)</span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_xlabel(<span class="st">'Human path length'</span>)</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_title(<span class="st">"2. Path lengths obtained by human players, when optimal length is 4."</span>)</span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Count of human path lengths, with shortest possible path = 3");</span></span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].legend(loc<span class="op">=</span><span class="dv">1</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="data-distribs" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="datastory_files/figure-html/data-distribs-output-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">How are the data distributed among successful and unsuccessful games? We show: (top) The distributions of optimal lengths of the proposed games, and (bottom) The distributions of path lengths obtained by humans.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>The graphs reveal some interesting features of the <strong>Wikispeedia hypertextual graph</strong> and the <strong>humans navigability network</strong>. The first plot shows the distribution of the shortest path distance of the tasks assigned to players.<br>
The second plot shows the length of the actual paths taken by humans, on the subset with shortest path distance equal to 4. Given that the shortest path distance is taken as a proxy to game difficulty (see Section <em>A matching study</em>): - the distribution of the difficulty of games peaks at length equal to 3 and ranges from 2 to 5; - there exist hyperlinks which are not connected to any other; - as difficulty increases, the class unbalance decreases; - the distribution of successful human paths (with fixed shortest path distance == 4) spreads to a wide range of values, non monotously. - the distribution of unsuccessful paths (with fixed shortest path distance == 4) is severely skewed to the left and peaks at 3, meaning that in such paths, players give up before even having a chance to win.</p>
<p>More <em>down-to-Earth</em>: the <strong>distribution of optimal path lengths</strong> and the <strong>distribution of human path lengths</strong> are <strong>uneven</strong> and significantly <strong>vary for the populations</strong> of successful vs unsuccessful players. <br> These conclusions bring us to look for features of the games possibly affecting players performances (a.k.a. covariates), leading them to behave so inhomogeneously.</p>
</section>
<section id="a-closer-look-into-the-collected-data-hunt-for-covariates" class="level2">
<h2 class="anchored" data-anchor-id="a-closer-look-into-the-collected-data-hunt-for-covariates">A closer look into the collected data: hunt for covariates</h2>
<section id="graph-theoretical-features" class="level4">
<h4 class="anchored" data-anchor-id="graph-theoretical-features">Graph-theoretical features</h4>
<p>To characterize a path, we can describe each clicked link (i.e.&nbsp;each piece of the path, a.k.a. node of the graph), in the context of the Wikispeedia network. What do we mean by this? Consider the articles “<em>United States of America</em>” and “<em>Bernard Hinault</em>”. The first one is one of most influential country on the world: intuitively it has a lot of other articles pointing to it, and also links to a lot other articles. The second is… well, less known. Way less known. Our friend here is, although one of the greatest cyclist in history, part of a very narrow context, in the context of the Wikispeedia network.</p>
<p>If we manage to reach “<em>United States of America</em>”, we have big chances of reaching any other article, as it’s well connected, while if we ever reach “<em>Bernard Hinault</em>”, the paths we take may be longer.</p>
<div class="cell" data-execution_count="66">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>Image(<span class="st">"images/curv_example.png"</span>, width<span class="op">=</span><span class="dv">600</span>, height<span class="op">=</span><span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="66">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="datastory_files/figure-html/cell-9-output-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Curvature describes the context of the links that are clicked, within the network. If we click a link with a high curvature, we’re in a very well connected part of the network. Matching by this quantity ensures that users are exploring similar regions of the wikipedia network, and thus allows us to make fair comparisons.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>To put this into numbers, we quantify the <strong>curvature</strong> of each edge (clickable link in an article) in the path. This quantifies the ammount of “flow potential” of a node (article). If an article has many ways in and many ways out, then its curvature is very negative, however if the ways in (or the ways out) are too few, we might have encountered a bottle neck, with a curvature closer to 0.</p>
<p>So, if the input node is <code>i</code>, and the output node is <code>j</code>, the curvature is calculated as follows:</p>
<p><br> <font size="4"> <span class="math display">\[\begin{align*}
F(_\rightarrow e_\rightarrow) &amp;= 2 - in(i) - out(j)
\end{align*}\]</span> </font> <br></p>
<p>All the features listed make the Wikispeedia hypertextual graph clumpy and the addressed comparisons above unfair (we did it on purpose to show you that when your granny warned you not to judge people by their appearance, she was right!).</p>
<p>In statystical terms: these are <strong>observed covariates</strong> that we will leverage to remove the <strong>confounders</strong> that may affect the outcome of the logistic regression analysis we’re aiming at conducting in order to find a potential correlation between the strategies/attitudes performed by players and their success.</p>
<p>To state it more clearly, the shortest path distance between the source and target article in the Wikispeedia hyperlinks graph can be viewed as a measure of the <strong>“difficulty”</strong> of the randomly assigned task (source and target articles), affecting both the players’ successfulness and the strategy adopted to address it (a.k.a. confounder); this is a <em>static feature</em>. Furthermore, depending on the users’ choices, the task can become harder or easier as the game develops (<em>dynamic feature</em>): this trait can be captured by the, path dependent, features hyperlinks’ in- and out- degrees.</p>
<p>As we wish to compare only similar paths, these features will be exploited to restrict the inquiry on paths with a certain degree of <strong>“similarity”</strong> between themselves.</p>
</section>
</section>
</section>
<section id="a-matching-study" class="level1">
<h1>A matching study</h1>
<p>The methodology chosen for the data processing step is to perform a <strong>matched analysis</strong> with the final objective to test if specific <strong>players’ game strategies lead to success</strong> in the Wikispeedia game. To this end a <strong>logistic regression</strong> is conducted with <strong>players’ success as the outcome</strong> and the following <strong>strategies as predictors</strong>:</p>
<ol type="1">
<li>Positioning of the clicked hyperlinks;</li>
<li>Clicking hyperlinks in image captions;</li>
<li>Clicking articles with the following semantic similarity patterns:
<ul>
<li>increasing semantic similarity along the path between articles and the target article;</li>
<li>increasing semantic similarity along the path between two sequentially clicked articles.</li>
</ul></li>
</ol>
<p>In order to remove the aforementioned confounders, the dataset is filtered and the matching is performed accordingly with the assumptions made. Players are matched on same shortest path distance of the assigned task, and maximum <strong>propensity score</strong>. The propensity scores are obtained by calculating the <strong>predicted outcomes of a logistic regression</strong> with the outcome being the <em>probability of treatment</em> and the predictors being <em>features of the human paths</em>. The <strong>treated subject</strong> being the user performing a specific strategy (e.g.&nbsp;clicking more frequently than the average on hyperlinks showing up in images’ captions) and the <strong>controlled subject</strong> being the user NOT performing the strategy.</p>
<p>The players tested are now on the <strong>same starting point when choosing what strategy to adopt</strong>.</p>
<p>The analysis challenge can be reformulated as follows: <em><strong>“being assigned an equally difficult task and being equally free to perform a specific strategy, are players more successful if they adopt that specific strategy?”</strong></em></p>
<section id="finally-the-real-deal-is-there-a-programmatic-way-to-win-this-game" class="level3">
<h3 class="anchored" data-anchor-id="finally-the-real-deal-is-there-a-programmatic-way-to-win-this-game">Finally, the real deal, is there a programmatic way to win this game?</h3>
<div class="cell" data-execution_count="65">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> highlight_rows(row):</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    value <span class="op">=</span> row.loc[<span class="st">"p-value"</span>]</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> value <span class="op">&gt;</span> <span class="fl">0.05</span>:</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        color <span class="op">=</span> <span class="st">'#FFB3BA'</span> <span class="co"># Red</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> value <span class="op">&lt;</span> <span class="fl">0.05</span>:</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>        color <span class="op">=</span> <span class="st">'#BAFFC9'</span> <span class="co"># Green</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [<span class="st">'background-color: </span><span class="sc">{}</span><span class="st">'</span>.<span class="bu">format</span>(color) <span class="cf">for</span> r <span class="kw">in</span> row]</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>results_df <span class="op">=</span> (pd.read_csv(<span class="st">"images/results_matching.csv"</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>              .loc[[<span class="st">"Coefficient"</span>, <span class="st">"Coefficient p-value"</span>]]</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>              .T)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>results_df.columns <span class="op">=</span> [<span class="st">"Coefficient"</span>, <span class="st">"p-value"</span>]</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>(results_df</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a> .sort_values(by<span class="op">=</span><span class="st">"p-value"</span>)</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a> .style</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a> .<span class="bu">apply</span>(highlight_rows, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="65">

<style type="text/css">
#T_3e9e4_row0_col0, #T_3e9e4_row0_col1, #T_3e9e4_row1_col0, #T_3e9e4_row1_col1 {
  background-color: #BAFFC9;
}
#T_3e9e4_row2_col0, #T_3e9e4_row2_col1, #T_3e9e4_row3_col0, #T_3e9e4_row3_col1, #T_3e9e4_row4_col0, #T_3e9e4_row4_col1, #T_3e9e4_row5_col0, #T_3e9e4_row5_col1 {
  background-color: #FFB3BA;
}
</style>
<table id="T_3e9e4">
  <thead>
    <tr>
      <th class="blank level0">&nbsp;</th>
      <th id="T_3e9e4_level0_col0" class="col_heading level0 col0">Coefficient</th>
      <th id="T_3e9e4_level0_col1" class="col_heading level0 col1">p-value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_3e9e4_level0_row0" class="row_heading level0 row0">target_strictly_increasing</th>
      <td id="T_3e9e4_row0_col0" class="data row0 col0">0.331702</td>
      <td id="T_3e9e4_row0_col1" class="data row0 col1">0.000369</td>
    </tr>
    <tr>
      <th id="T_3e9e4_level0_row1" class="row_heading level0 row1">used_bottom</th>
      <td id="T_3e9e4_row1_col0" class="data row1 col0">-0.480309</td>
      <td id="T_3e9e4_row1_col1" class="data row1 col1">0.029248</td>
    </tr>
    <tr>
      <th id="T_3e9e4_level0_row2" class="row_heading level0 row2">seq_strictly_increasing</th>
      <td id="T_3e9e4_row2_col0" class="data row2 col0">0.185502</td>
      <td id="T_3e9e4_row2_col1" class="data row2 col1">0.335804</td>
    </tr>
    <tr>
      <th id="T_3e9e4_level0_row3" class="row_heading level0 row3">used_top</th>
      <td id="T_3e9e4_row3_col0" class="data row3 col0">-0.187462</td>
      <td id="T_3e9e4_row3_col1" class="data row3 col1">0.358632</td>
    </tr>
    <tr>
      <th id="T_3e9e4_level0_row4" class="row_heading level0 row4">used_center_bottom</th>
      <td id="T_3e9e4_row4_col0" class="data row4 col0">-0.107463</td>
      <td id="T_3e9e4_row4_col1" class="data row4 col1">0.604242</td>
    </tr>
    <tr>
      <th id="T_3e9e4_level0_row5" class="row_heading level0 row5">used_count_images</th>
      <td id="T_3e9e4_row5_col0" class="data row5 col0">-0.016091</td>
      <td id="T_3e9e4_row5_col1" class="data row5 col1">0.876319</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</section>
<section id="yes-and-no" class="level3">
<h3 class="anchored" data-anchor-id="yes-and-no">YES and NO</h3>
<p>We tested <strong>6</strong> different possible strategies, and we found that <strong>2</strong> of them impact the players’ successfulness, namely <code>clicking links in the bottom of the page</code>, and <code>clicking to increase similarity to target</code> (the significant p-values allow to infer a difference in the outcome between differently behaving populations players). Instead it is not possible to evaluate if the strategies <code>clicking links in image captions</code>, <code>clicking links in the top of the page</code>, <code>clicking links in the center-bottom of the page</code>, <code>clicking to increase similarity to next</code> give players an edge in the game.</p>
<p><strong>These results well picture reality!</strong></p>
<p>It is not surprising that clicking hyperliks in image captions doesn’t play a role in users’ success, still we proved they’re tempted to do it. Similarly for the attitude of clicking on hyperlinks located in peculiar positions of the article text. Unexpectedly, though, clicking links in the bottom of the webpage has a significantly negative effect on the outcome of the game. Even if we cannot justify by with common sense, we advise you <strong>NOT TO DO THIS 😭</strong>. Least but not last, <code>clicking to increase similarity to target</code> has proven to have a significantly positive impact on players’ success. We have good evidence that there’s no shortcut to success in this game: if you wanna win in Wikispeedia game, you will (un)fortunately have to think hard!</p>
<p><strong>In the end we’ll let you, dear reader, judge if to be happy with the result that common sense actually makes sense or toi be sad with the finding that there’s no way to cheat common sense.</strong></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>