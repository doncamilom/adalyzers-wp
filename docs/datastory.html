<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ADAlyzers super cool project - Wikispeedia: An exploration into human strategy through path navigation.</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">ADAlyzers super cool project</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#wikispeedia-what-the-hell-is-this" id="toc-wikispeedia-what-the-hell-is-this" class="nav-link active" data-scroll-target="#wikispeedia-what-the-hell-is-this">Wikispeedia: What the hell is this?</a></li>
  <li><a href="#a-look-into-the-collected-data" id="toc-a-look-into-the-collected-data" class="nav-link" data-scroll-target="#a-look-into-the-collected-data">A look into the collected data…</a></li>
  <li><a href="#and-now-the-real-deal" id="toc-and-now-the-real-deal" class="nav-link" data-scroll-target="#and-now-the-real-deal">And now the real deal</a>
  <ul class="collapse">
  <li><a href="#confounding-variables" id="toc-confounding-variables" class="nav-link" data-scroll-target="#confounding-variables">Confounding variables</a></li>
  <li><a href="#treatment" id="toc-treatment" class="nav-link" data-scroll-target="#treatment">Treatment</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Wikispeedia: An exploration into human strategy through path navigation.</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<hr>
<section id="wikispeedia-what-the-hell-is-this" class="level2">
<h2 class="anchored" data-anchor-id="wikispeedia-what-the-hell-is-this">Wikispeedia: What the hell is this?</h2>
<p>Since the earliest records, humans have wandered across endless lands and walked thorugh mysterious paths, in an attempt to uncover the unexplored and find better conditions for their tribes. The rise of agriculture and the industrial era has, however, changed things, turning us into bare sedentary animals… until now!</p>
<p><img src="images/heComputer.gif" class="img-fluid"></p>
<p><a href="https://dlab.epfl.ch/wikispeedia/play/">Wikispeedia</a> is an easy and fun game: You are given two Wikipedia articles, and starting from the first article, your goal is to reach the second one exclusively by following links in the articles you encounter, effectively letting you explore your own paths across the vast wikipedia, for free! Your game data is collected by <a href="https://dlab.epfl.ch/">The EPFL Data Science Lab</a>, which helps us and them better understand some aspects of human behaviour 😉.</p>
<p>Using this data, we ask ourselves, are there patterns in the way players navigate the network, that make them more successful? That is, are there any optimal strategy that doesn’t require extensive knowledge of the network?</p>
<p>Players are faced with multiple stimulae during the playing session, and players’ decisions as well as their posterior success may be influenced by them. For example, users might navigate the network through <code>semantic similarity</code> optimization, or they might just click the links found in <code>images</code> or <code>tables</code>, etc.</p>
<p>Do these particular features have any effect on players’ success? Let’s see!</p>
<hr>
</section>
<section id="a-look-into-the-collected-data" class="level2">
<h2 class="anchored" data-anchor-id="a-look-into-the-collected-data">A look into the collected data…</h2>
<div class="cell" data-execution_count="64">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>parent_folder_path <span class="op">=</span> <span class="st">'.data/wikispeedia_paths-and-graph/'</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>paths_finished_df <span class="op">=</span> (pd.read_csv(os.path.join(parent_folder_path, <span class="st">'paths_finished.tsv'</span>), </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>                                 sep<span class="op">=</span><span class="st">'</span><span class="ch">\t</span><span class="st">'</span>, skiprows<span class="op">=</span><span class="dv">15</span>, header<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>                     .rename(columns<span class="op">=</span>{<span class="dv">0</span>:<span class="st">"ip"</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>                                      <span class="dv">1</span>:<span class="st">"timestamp"</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>                                      <span class="dv">2</span>:<span class="st">"duration"</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>                                      <span class="dv">3</span>:<span class="st">"path"</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>                                      <span class="dv">4</span>:<span class="st">"rating"</span>}))</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>paths_unfinished_df<span class="op">=</span>(pd.read_csv(os.path.join(parent_folder_path, <span class="st">'paths_unfinished.tsv'</span>), </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>                               sep<span class="op">=</span><span class="st">'</span><span class="ch">\t</span><span class="st">'</span>, skiprows<span class="op">=</span><span class="dv">16</span>, header<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>                     .rename(columns<span class="op">=</span>{<span class="dv">0</span>:<span class="st">"ip"</span>,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>                                      <span class="dv">1</span>:<span class="st">"timestamp"</span>,</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>                                      <span class="dv">2</span>:<span class="st">"duration"</span>,</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>                                      <span class="dv">3</span>:<span class="st">"path"</span>,</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>                                      <span class="dv">4</span>:<span class="st">"target"</span>,</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>                                      <span class="dv">5</span>:<span class="st">"type"</span>}))</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the shortest path matrix</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>shortest_path_matrix <span class="op">=</span> []</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'.data/wikispeedia_paths-and-graph/shortest-path-distance-matrix.txt'</span>, <span class="st">'r'</span>) <span class="im">as</span> f:</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># the first 17 lines (indexed from 0) is the file description </span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> line <span class="kw">in</span> f.readlines()[<span class="dv">17</span>:]:</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>        shortest_path_matrix.append(line)</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="co"># next, we need a list of all the article names. The order of the articles </span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="co"># is the same as the shortest_path_matrix as per the file descriptions</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>articles <span class="op">=</span> pd.read_csv(<span class="st">'.data/wikispeedia_paths-and-graph/articles.tsv'</span>, </span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>                       sep<span class="op">=</span><span class="st">'</span><span class="ch">\t</span><span class="st">'</span>, </span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>                       skiprows<span class="op">=</span><span class="dv">11</span>, </span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>                       header<span class="op">=</span><span class="va">None</span>)[<span class="dv">0</span>]</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>article_names_cleaned <span class="op">=</span> []</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co"> TO GINEVRA:</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="co"># I need to change the function below to use urlparse</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="co"># some articles have encoded names. Decode these</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> article <span class="kw">in</span> articles:</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># the "%" character indicates an encoded name</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">"%"</span> <span class="kw">not</span> <span class="kw">in</span> article:</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>        <span class="co"># store the article name</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>        article_names_cleaned.append(article)</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>        <span class="cf">with</span> <span class="bu">open</span>(os.path.join(<span class="st">'.data/plaintext_articles'</span>, <span class="ss">f'</span><span class="sc">{</span>article<span class="sc">}</span><span class="ss">.txt'</span>), <span class="st">'r'</span>) <span class="im">as</span> f:</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>            <span class="co"># extract the correct name. It is always on the 3rd line of the article</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>            correct_name <span class="op">=</span> f.readlines()[<span class="dv">2</span>].replace(<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>, <span class="st">''</span>)</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>            <span class="co"># store the article name</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>            article_names_cleaned.append(correct_name)</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>article_names_cleaned[:<span class="dv">3</span>]</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a><span class="co"># for each human path, perform the following steps:</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a><span class="co">#      1. extract the source and target article</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a><span class="co">#      2. find the *index* in the article names list that corresponds to the source and target article</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a><span class="co">#      3. the corresponding *index* row in the shortest path matrix corresponds to the source article. </span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a><span class="co">#         from this list of numbers, use the target article *index* to find the *shortest path length*</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> augment_with_shortest_path(df: pd.DataFrame, successful: <span class="bu">bool</span>) <span class="op">-&gt;</span> pd.DataFrame:</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a><span class="co">    this function takes a Series and returns a DataFrame with the following columns:</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a><span class="co">       1. path</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a><span class="co">       2. source article</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a><span class="co">       3. target article</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a><span class="co">       4. shortest path length</span></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a><span class="co">       </span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a><span class="co">    input:</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a><span class="co">       df: the Pandas DataFrame containing all the human navigation paths</span></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a><span class="co">       successful: a boolean indicating whether the paths were successful or not</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remove all paths with back-tracks</span></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df[<span class="op">~</span>df[<span class="st">'path'</span>].<span class="bu">str</span>.contains(<span class="st">'&lt;'</span>)]</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> clean_query_article_name(name: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""this helper function takes an encoded article name and returns the cleaned name"""</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">"%"</span> <span class="kw">in</span> name:</span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>            <span class="cf">with</span> <span class="bu">open</span>(os.path.join(<span class="st">'.data/plaintext_articles'</span>, <span class="ss">f'</span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">.txt'</span>), <span class="st">'r'</span>) <span class="im">as</span> f:</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>                <span class="co"># extract the correct name. It is always on the 3rd line of the article</span></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> f.readlines()[<span class="dv">2</span>].replace(<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>, <span class="st">''</span>)    </span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> name</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>    paths, human_path_lengths, source_articles, target_articles, shortest_paths <span class="op">=</span> [], [], [], [], []</span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>    <span class="co"># all information required for successful paths is in the path itself</span></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> successful:</span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> human_path <span class="kw">in</span> df[<span class="st">'path'</span>]:</span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>            paths.append(human_path)</span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>            split_path <span class="op">=</span> human_path.split(<span class="st">';'</span>)</span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>            <span class="co"># subtract 1 because we do not count the source article</span></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>            human_path_lengths.append(<span class="bu">len</span>(split_path)<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>            source <span class="op">=</span> clean_query_article_name(split_path[<span class="dv">0</span>])</span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>            target <span class="op">=</span> clean_query_article_name(split_path[<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>            source_articles.append(source)</span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>            target_articles.append(target)</span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>    <span class="co"># unsuccessful paths require extraction of the target article from a separate column</span></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> human_path, target <span class="kw">in</span> <span class="bu">zip</span>(df[<span class="st">'path'</span>], df[<span class="st">'target'</span>]):</span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a>            paths.append(human_path)</span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>            split_path <span class="op">=</span> human_path.split(<span class="st">';'</span>)</span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>            <span class="co"># subtract 1 because we do not count the source article</span></span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a>            human_path_lengths.append(<span class="bu">len</span>(split_path)<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>            source <span class="op">=</span> clean_query_article_name(split_path[<span class="dv">0</span>])</span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a>            source_articles.append(source)</span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>            target_articles.append(target)</span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> source, target <span class="kw">in</span> <span class="bu">zip</span>(source_articles, target_articles):</span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a>        source_index <span class="op">=</span> article_names_cleaned.index(source)</span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a>        <span class="co"># there are target articles that were not provided in the plain text files</span></span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>            target_index <span class="op">=</span> article_names_cleaned.index(target)</span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span> <span class="pp">Exception</span>:</span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a>            shortest_paths.append(<span class="st">"N/A"</span>)</span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a>        <span class="co"># query the shortest path matrix to get the correct vector (corresponding to the source article)</span></span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>        shortest_path_vector <span class="op">=</span> shortest_path_matrix[source_index]</span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a>        <span class="co"># now find the target article indexed integer in the vector</span></span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a>        shortest <span class="op">=</span> shortest_path_vector[target_index]</span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a>        <span class="co"># it's not always possible to get to the target article. Impossible navigation is denoted by "_"</span></span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> shortest <span class="op">==</span> <span class="st">"_"</span>:</span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a>            shortest_paths.append(<span class="st">"Impossible"</span>)</span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a>            shortest_paths.append(<span class="bu">int</span>(shortest))</span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a>    <span class="co"># create the augmented DataFrame</span></span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a>    out <span class="op">=</span> pd.DataFrame({</span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a>                      <span class="st">'path'</span>: paths,</span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a>                      <span class="st">'source_article'</span>: source_articles,</span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a>                      <span class="st">'target_article'</span>: target_articles,</span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a>                      <span class="st">'human_path_length'</span>: human_path_lengths,</span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a>                      <span class="st">'shortest_path_length'</span>: shortest_paths</span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a>                      })</span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> out</span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a>successful_df <span class="op">=</span> augment_with_shortest_path(df<span class="op">=</span>paths_finished_df, successful<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a><span class="co"># to investigate human behaviour, we remove all "Impossible paths" and also shortest_path_length = 0</span></span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a>successful_df <span class="op">=</span> successful_df[(successful_df[<span class="st">'shortest_path_length'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x <span class="op">!=</span> <span class="st">'Impossible'</span> <span class="kw">and</span> x <span class="op">!=</span> <span class="dv">0</span>))]</span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a><span class="co"># next, we will keep only shortest_path_lengths &gt;= 3</span></span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a>successful_df <span class="op">=</span> successful_df[(successful_df[<span class="st">'shortest_path_length'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x <span class="op">&gt;=</span> <span class="dv">3</span>))]</span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a>unsuccessful_df <span class="op">=</span> augment_with_shortest_path(df<span class="op">=</span>paths_unfinished_df, successful<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a><span class="co"># some target articles for unsuccessful paths were not provided in the plain_text folder, denoted in</span></span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a><span class="co"># the DataFrame as "N/A". Remove these</span></span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a>unsuccessful_df <span class="op">=</span> unsuccessful_df[(unsuccessful_df[<span class="st">'shortest_path_length'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x <span class="op">!=</span> <span class="st">'N/A'</span> <span class="kw">and</span> x <span class="op">!=</span> <span class="st">'Impossible'</span>))]</span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a><span class="co"># some unsuccesful paths only contain 1 article because the user didn't click anything</span></span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a><span class="co"># these are less meaningful paths to analyze as we are interested in users who tried but failed</span></span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a><span class="co"># we will keep paths where the human clicked at least 3 articles</span></span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a>unsuccessful_df <span class="op">=</span> unsuccessful_df[(unsuccessful_df[<span class="st">'shortest_path_length'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x <span class="op">&gt;=</span> <span class="dv">3</span>))]</span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a>unsuccessful_df <span class="op">=</span> unsuccessful_df[(unsuccessful_df[<span class="st">'human_path_length'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x <span class="op">&gt;=</span> <span class="dv">3</span>))]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>How are the data distributed among successful and unsuccessful games? The following plots show</p>
<ol type="1">
<li>The distributions of optimal lengths of the proposed games.</li>
<li>The distributions of path lengths obtained by humans.</li>
</ol>
<div class="cell" data-execution_count="71">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># take a look at the shortest_path distributions</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">2</span>,<span class="dv">1</span>, </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                       figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">8</span>), </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>                       gridspec_kw<span class="op">=</span>{<span class="st">"hspace"</span>:<span class="fl">0.4</span>})</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">"font.size"</span>] <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>successful_counts <span class="op">=</span> (successful_df[<span class="st">'shortest_path_length'</span>]</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>                     .value_counts()</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>                     .reset_index())</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>successful_counts[<span class="st">"success"</span>] <span class="op">=</span> <span class="st">"successful"</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>unsuccessful_counts <span class="op">=</span> (unsuccessful_df[<span class="st">'shortest_path_length'</span>]</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>                       .value_counts()</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>                       .reset_index())</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>unsuccessful_counts[<span class="st">"success"</span>] <span class="op">=</span> <span class="st">"unsuccessful"</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>all_counts <span class="op">=</span> pd.concat([successful_counts, </span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>                        unsuccessful_counts], </span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>                       axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>sns.barplot(data<span class="op">=</span>all_counts, </span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>            x<span class="op">=</span><span class="st">"index"</span>, </span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>            y<span class="op">=</span><span class="st">"shortest_path_length"</span>, </span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>            hue<span class="op">=</span><span class="st">"success"</span>,</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>            ax<span class="op">=</span>ax[<span class="dv">0</span>], </span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>            palette<span class="op">=</span>[<span class="st">"#b2df8a"</span>, <span class="st">"#1f78b4"</span>])</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_ylabel(<span class="st">'Absolute Counts'</span>)<span class="op">;</span> </span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_xlabel(<span class="st">'Shortest Path'</span>)<span class="op">;</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_title(<span class="st">"1. Optimal lengths of the proposed games."</span>)</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a><span class="co">#Count of human paths, stratified by shortest possible path")</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].legend(loc<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_ylabel(<span class="st">'Absolute Counts'</span>) </span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_xlabel(<span class="st">'Shortest Path'</span>)</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Next plot: frequency by human length</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>successful_human_path_lengths_3 <span class="op">=</span> (successful_df</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>                                   [successful_df[<span class="st">'shortest_path_length'</span>] <span class="op">==</span> <span class="dv">3</span>]</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>                                   [<span class="st">'human_path_length'</span>]</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>                                   .value_counts()</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>                                   .reset_index())</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>successful_human_path_lengths_3[<span class="st">"success"</span>] <span class="op">=</span> <span class="st">"successful"</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>unsuccessful_human_path_lengths_3 <span class="op">=</span> (unsuccessful_df</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>                                     [unsuccessful_df[<span class="st">'shortest_path_length'</span>] <span class="op">==</span> <span class="dv">3</span>]</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>                                     [<span class="st">'human_path_length'</span>]</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>                                     .value_counts()</span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>                                     .reset_index())</span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>unsuccessful_human_path_lengths_3[<span class="st">"success"</span>] <span class="op">=</span> <span class="st">"unsuccessful"</span></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>all_path_l3 <span class="op">=</span> pd.concat([successful_human_path_lengths_3,</span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>                         unsuccessful_human_path_lengths_3])</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>sns.barplot(data<span class="op">=</span>all_path_l3, </span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>            x<span class="op">=</span><span class="st">"index"</span>, </span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>            y<span class="op">=</span><span class="st">"human_path_length"</span>, </span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>            hue<span class="op">=</span><span class="st">"success"</span>, </span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>            ax<span class="op">=</span>ax[<span class="dv">1</span>],</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>            palette<span class="op">=</span>[<span class="st">"#b2df8a"</span>, <span class="st">"#1f78b4"</span>])</span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_xlim(<span class="op">-</span><span class="fl">0.5</span>,<span class="fl">10.5</span>)</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_ylabel(<span class="st">'Absolute Counts'</span>)</span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_xlabel(<span class="st">'Human path length'</span>)</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_title(<span class="st">"2. Path lengths obtained by human players, when optimal length is 3."</span>)</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a><span class="co"># Count of human path lengths, with shortest possible path = 3");</span></span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].legend(loc<span class="op">=</span><span class="dv">1</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<p><img src="datastory_files/figure-html/cell-4-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Given a shortest path length of 3, the majority of human path lengths are 3, 4, 5 for both successful and unsuccessful paths. Let’s filter the corresponding DataFrames to only keep these path lengths. The matched analysis will be done with these lengths.</p>
<hr>
</section>
<section id="and-now-the-real-deal" class="level2">
<h2 class="anchored" data-anchor-id="and-now-the-real-deal">And now the real deal</h2>
<p>We wanna test wheather different strategies lead to success in the Wikispeedia game. With this goal in mind, paths can be characterized through local features of the clicked links and articles. The features we extract are:</p>
<ul>
<li>Relative position of each hyperlink within the current article.</li>
<li>Is the hyperlink next to an image?</li>
<li>Is the hyperlink inside a table?</li>
<li>Similarity between current and target article.</li>
<li>Hyperlink curvature along the path.</li>
</ul>
<p>Once each path has been featurized we perform a matching analysis that lets us reduce the bias in the distributions of successful and unsuccessful populations. For this, we find pairs of <code>subjects</code> (paths) in the dataset, that have very similar features, but differ in the one we want to test (the <code>treatment</code>). The new distributions will then be much less biased and we will be able to compare the effect of the treatment variable.</p>
<section id="confounding-variables" class="level3">
<h3 class="anchored" data-anchor-id="confounding-variables">Confounding variables</h3>
<p>Many factors can affect the analysis, among them:</p>
<ol type="1">
<li>the difficulty of each task, and</li>
<li>the strategy adopted to solve it.</li>
</ol>
<p>To address the first, we naively quantify <code>difficulty</code> of a task as the minimum distance between the source and the target, as determined with the Floyed-Warshall algorithm, while the second is addressed through path length, e.g.&nbsp;the total number of links clicked by each player in the given game.</p>
<p>Controlling by such variables allows a first approximation to controlling these confounding effects.</p>
</section>
<section id="treatment" class="level3">
<h3 class="anchored" data-anchor-id="treatment">Treatment</h3>
<p>We will test the effect of clicking mostly links in image boxes.</p>
<p>The question is then: given an equally difficult task assigned, and having a fixed number of possible choices to perform, are players more successful if they adopt <code>clicking mainly links in images</code> as a strategy?</p>
<div class="cell" data-execution_count="10">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>successful_df <span class="op">=</span> successful_df[(successful_df[<span class="st">'shortest_path_length'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x <span class="op">==</span> <span class="dv">3</span>))]</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>successful_df <span class="op">=</span> successful_df[(successful_df[<span class="st">'human_path_length'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="dv">3</span> <span class="op">&lt;=</span> x <span class="op">&lt;=</span> <span class="dv">5</span>))]</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>successful_df.head(<span class="dv">3</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="10">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>path</th>
      <th>source_article</th>
      <th>target_article</th>
      <th>human_path_length</th>
      <th>shortest_path_length</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>14th_century;Europe;Africa;Atlantic_slave_trad...</td>
      <td>14th_century</td>
      <td>African_slave_trade</td>
      <td>4</td>
      <td>3</td>
    </tr>
    <tr>
      <th>5</th>
      <td>14th_century;Europe;North_America;United_State...</td>
      <td>14th_century</td>
      <td>John_F._Kennedy</td>
      <td>5</td>
      <td>3</td>
    </tr>
    <tr>
      <th>6</th>
      <td>14th_century;China;Gunpowder;Fire</td>
      <td>14th_century</td>
      <td>Fire</td>
      <td>3</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="11">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>unsuccessful_df <span class="op">=</span> unsuccessful_df[(unsuccessful_df[<span class="st">'shortest_path_length'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x <span class="op">==</span> <span class="dv">3</span>))]</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>unsuccessful_df <span class="op">=</span> unsuccessful_df[(unsuccessful_df[<span class="st">'human_path_length'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="dv">3</span> <span class="op">&lt;=</span> x <span class="op">&lt;=</span> <span class="dv">5</span>))]</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>unsuccessful_df.head(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="11">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>path</th>
      <th>source_article</th>
      <th>target_article</th>
      <th>human_path_length</th>
      <th>shortest_path_length</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>5</th>
      <td>Agriculture;History_of_the_world;China;Yangtze...</td>
      <td>Agriculture</td>
      <td>Grand_Canal_of_China</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Ape;Asia;Computer;Automobile</td>
      <td>Ape</td>
      <td>Tin</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Symmetry;Science;Age_of_Enlightenment;Dark_Age...</td>
      <td>Symmetry</td>
      <td>Scottish_Episcopal_Church</td>
      <td>5</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>At this point, we have filtered the successful and unsuccessful DataFrames by the following conditions:</p>
<pre><code>Shortest path length = 3 --&gt; we hypothesize that all paths have the same "difficulty" by enforcing this
The actual human path lengths are 3,4,5 --&gt; the majority of human paths are within these lengths</code></pre>
<p>The next step is to perform matching of datasets. To make this process possible, we first augment both successful and unsuccessful DataFrames with is_successful Boolean condition.</p>
<div class="cell" data-execution_count="12">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>successful_df[<span class="st">'is_successful'</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>unsuccessful_df[<span class="st">'is_successful'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># merge the successful and unsuccessful DataFrames</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>final_df <span class="op">=</span> pd.concat([successful_df, unsuccessful_df])</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>final_df.reset_index(drop<span class="op">=</span><span class="va">True</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>final_df.head(<span class="dv">3</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co"># save the DataFrame</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>final_df.to_csv(<span class="st">'final_df.csv'</span>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co"># next, we will calculate "treatments" involving semantic distance metrics for the DataFrame</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>     </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>2 . Document Similarity Similarity Between Wikipedia Articles: ‘Bag-of-Words’ Cosine Similarity Based on Word Frequencies</p>
<p>We are interested in measuring <em>similarity</em> between Wikipedia articles to investigate players’ strategies in Wikispeedia. The proposed similarity is Cosine Similarity measured on word frequencies given a pair of articles. Therefore, the assumption we make is that articles with similar occurrences of words are similar.</p>
<p>In order to mitigate similarity due to common English words such as “the”, we apply a filter as follows:</p>
<pre><code>Remove all Stop words as defined in Scikit-learn

https://scikit-learn.org/stable/modules/feature_extraction.html#nqy18

Remove all white spaces and \n characters

Apply a scaled version of word frequency count as implemented in TfidfTransformer in Scikit-learn:

https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.TfidfTransformer.html#sklearn.feature_extraction.text.TfidfTransformer</code></pre>
<p>The cell blocks below show our data processing pipeline.</p>
<div class="cell" data-execution_count="15">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>base_path <span class="op">=</span> <span class="st">'.data/plaintext_articles'</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>articles <span class="op">=</span> os.listdir(base_path)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># sort the article names in alphabetical order. This is not strictly required</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>articles <span class="op">=</span> <span class="bu">sorted</span>(articles)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> remove_duplicates_and_fix_names(articles: <span class="bu">list</span>):</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""this function parses all the articles provided in the plaintext folder and stores the</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">       names of all the articles after "cleaning" them (some articles containing accents have encoded names).</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co">       The raw text from the files are also stored in a list after removing white spaces and empty lines."""</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> parse_text(article: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""this helper function reads a raw text file and removes white spaces and empty lines."""</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">with</span> <span class="bu">open</span>(os.path.join(base_path, article)) <span class="im">as</span> f:</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>            <span class="co"># remove white spaces</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>            raw_text <span class="op">=</span> [line.rstrip() <span class="cf">for</span> line <span class="kw">in</span> f.readlines()]</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>            <span class="co"># remove empty lines</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>            raw_text <span class="op">=</span> [line.strip() <span class="cf">for</span> line <span class="kw">in</span> raw_text <span class="cf">if</span> line <span class="op">!=</span> <span class="st">''</span>]</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="bu">str</span>(raw_text)</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># some article names have errors - fix these</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    article_names_cleaned, texts <span class="op">=</span> [], []</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> article <span class="kw">in</span> articles:</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>        <span class="co"># the "%" character indicates an encoded name</span></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">"%"</span> <span class="kw">not</span> <span class="kw">in</span> article:</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>            <span class="co"># store the article name</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>            article_names_cleaned.append(article)</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>            <span class="co"># store the raw text from the article</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>            texts.append(parse_text(article))</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>            <span class="cf">with</span> <span class="bu">open</span>(os.path.join(base_path, article), <span class="st">'r'</span>) <span class="im">as</span> f:</span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>                <span class="co"># extract the correct name. It is always on the 3rd line of the article</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>                correct_name <span class="op">=</span> f.readlines()[<span class="dv">2</span>].replace(<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>, <span class="st">''</span>)</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>                <span class="co"># store the article name</span></span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>                article_names_cleaned.append(correct_name)</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>                <span class="co"># store the raw text from the article</span></span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>                texts.append(parse_text(article))</span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>                    </span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remove ".txt" from the article names</span></span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>    article_names_cleaned <span class="op">=</span> [article.replace(<span class="st">'.txt'</span>, <span class="st">''</span>) <span class="cf">for</span> article <span class="kw">in</span> article_names_cleaned]</span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>    <span class="co"># remove list bracket from string casting of raw text</span></span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>    texts <span class="op">=</span> [text.replace(<span class="st">'['</span>, <span class="st">''</span>) <span class="cf">for</span> text <span class="kw">in</span> texts]</span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> article_names_cleaned, texts</span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a>article_names_cleaned, texts <span class="op">=</span> remove_duplicates_and_fix_names(articles)</span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>     </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-scrolled="true" data-execution_count="17">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># count word frequency using sklearn out-of-the-box functions</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.feature_extraction.text <span class="im">import</span> CountVectorizer, TfidfVectorizer</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># remove common stop words</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>tfid_vectorizer <span class="op">=</span> TfidfVectorizer(stop_words<span class="op">=</span><span class="st">'english'</span>)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co"># apply CountVectorizer and TfidfTransform sequentially</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>matrix <span class="op">=</span> tfid_vectorizer.fit_transform(texts)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>matrix <span class="op">=</span> matrix.todense()</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co"># by default, "TfidfVectorizer" uses l2 norm and thus, to obtain the Cosine Similarity,</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co"># we simply perform a dot product of the matrix</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>cosine_sim <span class="op">=</span> pd.DataFrame(np.dot(np.array(matrix), np.array(matrix).T), columns<span class="op">=</span>article_names_cleaned)</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co"># assign the index names also as the article names. This is used for easy querying pairs of articles</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>cosine_sim.index <span class="op">=</span> article_names_cleaned        </span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>cosine_sim</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="17">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Áedán mac Gabráin</th>
      <th>Åland</th>
      <th>Édouard Manet</th>
      <th>Éire</th>
      <th>Óengus I of the Picts</th>
      <th>€2 commemorative coins</th>
      <th>10th_century</th>
      <th>11th_century</th>
      <th>12th_century</th>
      <th>13th_century</th>
      <th>...</th>
      <th>Ziad_Jarrah</th>
      <th>Zimbabwe</th>
      <th>Zinc</th>
      <th>Zinc_chloride</th>
      <th>Zion_National_Park</th>
      <th>Zionism</th>
      <th>Zirconium</th>
      <th>Zoroaster</th>
      <th>Zuid-Gelders</th>
      <th>Zulu</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Áedán mac Gabráin</th>
      <td>1.000000</td>
      <td>0.003680</td>
      <td>0.006182</td>
      <td>0.047190</td>
      <td>0.183846</td>
      <td>0.004210</td>
      <td>0.008076</td>
      <td>0.012168</td>
      <td>0.013427</td>
      <td>0.011928</td>
      <td>...</td>
      <td>0.004239</td>
      <td>0.006244</td>
      <td>0.001843</td>
      <td>0.002172</td>
      <td>0.003523</td>
      <td>0.006111</td>
      <td>0.001494</td>
      <td>0.008908</td>
      <td>0.001593</td>
      <td>0.012721</td>
    </tr>
    <tr>
      <th>Åland</th>
      <td>0.003680</td>
      <td>1.000000</td>
      <td>0.008423</td>
      <td>0.017851</td>
      <td>0.004137</td>
      <td>0.043866</td>
      <td>0.007999</td>
      <td>0.004936</td>
      <td>0.004993</td>
      <td>0.013233</td>
      <td>...</td>
      <td>0.004768</td>
      <td>0.023149</td>
      <td>0.002752</td>
      <td>0.002160</td>
      <td>0.007089</td>
      <td>0.016041</td>
      <td>0.003315</td>
      <td>0.005287</td>
      <td>0.008188</td>
      <td>0.012883</td>
    </tr>
    <tr>
      <th>Édouard Manet</th>
      <td>0.006182</td>
      <td>0.008423</td>
      <td>1.000000</td>
      <td>0.009609</td>
      <td>0.006520</td>
      <td>0.014643</td>
      <td>0.011617</td>
      <td>0.008879</td>
      <td>0.011491</td>
      <td>0.011438</td>
      <td>...</td>
      <td>0.010377</td>
      <td>0.011835</td>
      <td>0.004556</td>
      <td>0.002780</td>
      <td>0.011044</td>
      <td>0.014414</td>
      <td>0.004934</td>
      <td>0.009887</td>
      <td>0.005441</td>
      <td>0.012838</td>
    </tr>
    <tr>
      <th>Éire</th>
      <td>0.047190</td>
      <td>0.017851</td>
      <td>0.009609</td>
      <td>1.000000</td>
      <td>0.049035</td>
      <td>0.033312</td>
      <td>0.012264</td>
      <td>0.008489</td>
      <td>0.033374</td>
      <td>0.015251</td>
      <td>...</td>
      <td>0.009314</td>
      <td>0.038388</td>
      <td>0.006863</td>
      <td>0.005671</td>
      <td>0.005486</td>
      <td>0.031955</td>
      <td>0.005751</td>
      <td>0.012004</td>
      <td>0.004430</td>
      <td>0.019581</td>
    </tr>
    <tr>
      <th>Óengus I of the Picts</th>
      <td>0.183846</td>
      <td>0.004137</td>
      <td>0.006520</td>
      <td>0.049035</td>
      <td>1.000000</td>
      <td>0.006741</td>
      <td>0.012741</td>
      <td>0.013508</td>
      <td>0.020239</td>
      <td>0.012106</td>
      <td>...</td>
      <td>0.004763</td>
      <td>0.008280</td>
      <td>0.002700</td>
      <td>0.002718</td>
      <td>0.005656</td>
      <td>0.008067</td>
      <td>0.001780</td>
      <td>0.009081</td>
      <td>0.001923</td>
      <td>0.015018</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>Zionism</th>
      <td>0.006111</td>
      <td>0.016041</td>
      <td>0.014414</td>
      <td>0.031955</td>
      <td>0.008067</td>
      <td>0.017812</td>
      <td>0.019210</td>
      <td>0.021355</td>
      <td>0.024060</td>
      <td>0.023037</td>
      <td>...</td>
      <td>0.012631</td>
      <td>0.038386</td>
      <td>0.007253</td>
      <td>0.003734</td>
      <td>0.028964</td>
      <td>1.000000</td>
      <td>0.006372</td>
      <td>0.016985</td>
      <td>0.004575</td>
      <td>0.026654</td>
    </tr>
    <tr>
      <th>Zirconium</th>
      <td>0.001494</td>
      <td>0.003315</td>
      <td>0.004934</td>
      <td>0.005751</td>
      <td>0.001780</td>
      <td>0.006597</td>
      <td>0.007255</td>
      <td>0.005258</td>
      <td>0.004183</td>
      <td>0.005319</td>
      <td>...</td>
      <td>0.003589</td>
      <td>0.010286</td>
      <td>0.065117</td>
      <td>0.038394</td>
      <td>0.005937</td>
      <td>0.006372</td>
      <td>1.000000</td>
      <td>0.005025</td>
      <td>0.003256</td>
      <td>0.004729</td>
    </tr>
    <tr>
      <th>Zoroaster</th>
      <td>0.008908</td>
      <td>0.005287</td>
      <td>0.009887</td>
      <td>0.012004</td>
      <td>0.009081</td>
      <td>0.010104</td>
      <td>0.021481</td>
      <td>0.019697</td>
      <td>0.017953</td>
      <td>0.024732</td>
      <td>...</td>
      <td>0.008748</td>
      <td>0.014037</td>
      <td>0.005008</td>
      <td>0.003395</td>
      <td>0.009401</td>
      <td>0.016985</td>
      <td>0.005025</td>
      <td>1.000000</td>
      <td>0.003077</td>
      <td>0.011154</td>
    </tr>
    <tr>
      <th>Zuid-Gelders</th>
      <td>0.001593</td>
      <td>0.008188</td>
      <td>0.005441</td>
      <td>0.004430</td>
      <td>0.001923</td>
      <td>0.005124</td>
      <td>0.004908</td>
      <td>0.004378</td>
      <td>0.002217</td>
      <td>0.004719</td>
      <td>...</td>
      <td>0.003414</td>
      <td>0.008758</td>
      <td>0.002613</td>
      <td>0.002273</td>
      <td>0.004882</td>
      <td>0.004575</td>
      <td>0.003256</td>
      <td>0.003077</td>
      <td>1.000000</td>
      <td>0.008353</td>
    </tr>
    <tr>
      <th>Zulu</th>
      <td>0.012721</td>
      <td>0.012883</td>
      <td>0.012838</td>
      <td>0.019581</td>
      <td>0.015018</td>
      <td>0.011059</td>
      <td>0.010697</td>
      <td>0.010512</td>
      <td>0.010046</td>
      <td>0.015055</td>
      <td>...</td>
      <td>0.007460</td>
      <td>0.074077</td>
      <td>0.003745</td>
      <td>0.003207</td>
      <td>0.009320</td>
      <td>0.026654</td>
      <td>0.004729</td>
      <td>0.011154</td>
      <td>0.008353</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
<p>4604 rows × 4604 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="18">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># save the Cosine Similarity matrix so we do not have to re-compute it every time</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>np.save(<span class="st">'cosine_similarity.npz'</span>, np.array(cosine_sim))</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>     </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution_count="19">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># let's take a look at the Cosine Similarity distribution of the most similar article to a given article</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>most_similar <span class="op">=</span> []</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(cosine_sim)):</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># index [-2] because index [-1] is always = 1 since it is a self similarity</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    most_similar.append(<span class="bu">sorted</span>(cosine_sim.iloc[idx])[<span class="op">-</span><span class="dv">2</span>])</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co"># plot the similarities</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>pd.Series(most_similar).plot(kind<span class="op">=</span><span class="st">'hist'</span>, edgecolor<span class="op">=</span><span class="st">'k'</span>)</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Cosine Similarity Distribution of Most Similar Articles"</span>)</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Cosine Similarity"</span>)<span class="op">;</span> plt.ylabel(<span class="st">"Absolute Counts"</span>)</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="co"># there are no glaring red flags, e.g., most Cosine Similarities close to 0 or 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>Text(0, 0.5, 'Absolute Counts')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="datastory_files/figure-html/cell-16-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="20">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># show a few concrete examples and see if our metric makes empirical sense</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>cosine_sim[<span class="st">'Ukraine'</span>].sort_values()</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co"># results look reasonable</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>     </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>Primula              0.000621
Wren                 0.001130
Saxicola             0.001339
Angelica             0.001394
Nuthatch             0.001473
                       ...   
Kiev                 0.340883
History_of_Russia    0.356504
Polish-Soviet_War    0.382866
Hero_of_Ukraine      0.403438
Ukraine              1.000000
Name: Ukraine, Length: 4604, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="21">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>cosine_sim[<span class="st">'Zinc'</span>].sort_values()</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># results also look reasonable</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>Primula          0.000303
List_of_lakes    0.000396
Nuthatch         0.000659
Wren             0.000738
Woodpecker       0.000761
                   ...   
Metal            0.158449
Common_cold      0.222766
Cadmium          0.247857
Zinc_chloride    0.511672
Zinc             1.000000
Name: Zinc, Length: 4604, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="22">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># "Cygni" are star systems/extrasolar planets and thus are expected to be similar</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># the time periods have some similarity</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>sns.clustermap(cosine_sim.iloc[<span class="dv">10</span>:<span class="dv">20</span>, <span class="dv">10</span>:<span class="dv">20</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>&lt;seaborn.matrix.ClusterGrid at 0x14dde5340&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="datastory_files/figure-html/cell-19-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="23">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># "Cancri" are exoplanets and thus are expected to be similar</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># we again see similarity between time periods</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>sns.clustermap(cosine_sim.iloc[<span class="dv">50</span>:<span class="dv">60</span>, <span class="dv">50</span>:<span class="dv">60</span>])</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>     </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>&lt;seaborn.matrix.ClusterGrid at 0x14ddd2490&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="datastory_files/figure-html/cell-20-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="24">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># after confirming that the Cosine Similarity method is informative, we next show the function</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># we will use to extract similarity of articles in a navigation path</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co"># first show a hard-coded navigation path for illustration</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>navigation_path <span class="op">=</span> <span class="st">'14th_century;Time;Light;Rainbow'</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>     </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution_count="31">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_path_cosine_similarity(path: <span class="bu">str</span>, matrix: pd.DataFrame, method: <span class="bu">str</span><span class="op">=</span><span class="st">'sequential'</span>) <span class="op">-&gt;</span> <span class="bu">list</span>:</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""this function takes a navigation path string and returns an array of the Cosine Similarity.</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">       Two methods are supported: 'sequential' (default) which measures the sequential similarity and </span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co">       'target' which measures the similarity between the current article at the target article.</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co">       </span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co">       Input:</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co">       path: navigation path string</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co">       matrix: pre-computed Cosine Similarity matrix</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co">       method: measurement method (defaults to 'sequential')</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="co">       </span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="co">       Return:</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="co">       list: list of similarity measures</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># there is 1 article that is duplicated in the plaintext folder. Problematically, the duplicated</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># article has different names and navigation paths can point to these different names, yet the </span></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># article is the same. This one exception is handled here. In the implementation, we do not have to </span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># worry about this particular article pointing back to itself as it is not possible</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># navigation paths are separated by ";"</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>    path <span class="op">=</span> path.split(<span class="st">';'</span>)</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># if the path only contains the starting article, return None</span></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(path) <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>    path_sims <span class="op">=</span> []</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> get_correct_name(query: <span class="bu">str</span>, base_path: <span class="bu">str</span><span class="op">=</span><span class="st">'.data/plaintext_articles'</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""this nested function is called in case a path contains error characters.</span></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a><span class="co">           Returns the fixed path so it can be used to query the Cosine Similarity matrix."""</span></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">'_'</span> <span class="kw">in</span> query <span class="kw">and</span> <span class="st">'%'</span> <span class="kw">not</span> <span class="kw">in</span> query:</span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> query</span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> query <span class="kw">in</span> [<span class="st">'Podcasting'</span>, <span class="st">'Color'</span>, <span class="st">'Fencing'</span>, <span class="st">'Anemia'</span>, <span class="st">'Quito'</span>]:</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> query</span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>            <span class="cf">with</span> <span class="bu">open</span>(os.path.join(base_path, <span class="ss">f'</span><span class="sc">{</span>query<span class="sc">}</span><span class="ss">.txt'</span>), <span class="st">'r'</span>) <span class="im">as</span> f:</span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>                out <span class="op">=</span> f.readlines()[<span class="dv">2</span>].replace(<span class="st">'</span><span class="ch">\n</span><span class="st">'</span>, <span class="st">''</span>)</span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> out</span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>    <span class="co"># compute the similarity between sequential nodes</span></span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>    <span class="co"># output list length is N-1</span></span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> method <span class="op">==</span> <span class="st">'sequential'</span>:</span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> idx <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(path)<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>):</span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a>            <span class="cf">try</span>:</span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a>                path_sims.append(matrix.loc[path[idx]].loc[path[idx<span class="op">+</span><span class="dv">1</span>]])</span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a>            <span class="cf">except</span> <span class="pp">Exception</span>:</span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true" tabindex="-1"></a>                <span class="co"># either path or both paths could be wrong - just "fix" both</span></span>
<span id="cb22-50"><a href="#cb22-50" aria-hidden="true" tabindex="-1"></a>                <span class="co"># treat the 1 exception due to duplicated file</span></span>
<span id="cb22-51"><a href="#cb22-51" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> get_correct_name(path[idx]) <span class="op">==</span> <span class="st">'Polish–Muscovite War (1605–1618)'</span>:</span>
<span id="cb22-52"><a href="#cb22-52" aria-hidden="true" tabindex="-1"></a>                    sim <span class="op">=</span> <span class="bu">float</span>(cosine_sim.loc[<span class="st">'Polish–Muscovite War (1605–1618)'</span>].drop_duplicates()[get_correct_name(path[idx<span class="op">+</span><span class="dv">1</span>])])</span>
<span id="cb22-53"><a href="#cb22-53" aria-hidden="true" tabindex="-1"></a>                    path_sims.append(sim)</span>
<span id="cb22-54"><a href="#cb22-54" aria-hidden="true" tabindex="-1"></a>                    </span>
<span id="cb22-55"><a href="#cb22-55" aria-hidden="true" tabindex="-1"></a>                <span class="cf">elif</span> get_correct_name(path[idx<span class="op">+</span><span class="dv">1</span>]) <span class="op">==</span> <span class="st">'Polish–Muscovite War (1605–1618)'</span>:</span>
<span id="cb22-56"><a href="#cb22-56" aria-hidden="true" tabindex="-1"></a>                    sim <span class="op">=</span> cosine_sim.loc[get_correct_name(path[idx])].drop_duplicates()[<span class="st">'Polish–Muscovite War (1605–1618)'</span>]</span>
<span id="cb22-57"><a href="#cb22-57" aria-hidden="true" tabindex="-1"></a>                    path_sims.append(sim)</span>
<span id="cb22-58"><a href="#cb22-58" aria-hidden="true" tabindex="-1"></a>                    </span>
<span id="cb22-59"><a href="#cb22-59" aria-hidden="true" tabindex="-1"></a>                <span class="cf">else</span>:</span>
<span id="cb22-60"><a href="#cb22-60" aria-hidden="true" tabindex="-1"></a>                    path_sims.append(matrix.loc[get_correct_name(path[idx])].loc[get_correct_name(path[idx<span class="op">+</span><span class="dv">1</span>])])</span>
<span id="cb22-61"><a href="#cb22-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-62"><a href="#cb22-62" aria-hidden="true" tabindex="-1"></a>                    </span>
<span id="cb22-63"><a href="#cb22-63" aria-hidden="true" tabindex="-1"></a>    <span class="co"># compute the similarity between the current node and the target node</span></span>
<span id="cb22-64"><a href="#cb22-64" aria-hidden="true" tabindex="-1"></a>    <span class="co"># output list length is N</span></span>
<span id="cb22-65"><a href="#cb22-65" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> method <span class="op">==</span> <span class="st">'target'</span>:</span>
<span id="cb22-66"><a href="#cb22-66" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> idx <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="bu">len</span>(path), <span class="dv">1</span>):</span>
<span id="cb22-67"><a href="#cb22-67" aria-hidden="true" tabindex="-1"></a>            <span class="cf">try</span>:</span>
<span id="cb22-68"><a href="#cb22-68" aria-hidden="true" tabindex="-1"></a>                path_sims.append(matrix.loc[path[idx]].loc[path[<span class="op">-</span><span class="dv">1</span>]])</span>
<span id="cb22-69"><a href="#cb22-69" aria-hidden="true" tabindex="-1"></a>            <span class="cf">except</span> <span class="pp">Exception</span>:</span>
<span id="cb22-70"><a href="#cb22-70" aria-hidden="true" tabindex="-1"></a>                <span class="co"># either path or both paths could be wrong - just "fix" both</span></span>
<span id="cb22-71"><a href="#cb22-71" aria-hidden="true" tabindex="-1"></a>                <span class="co"># treat the 1 exception due to duplicated file</span></span>
<span id="cb22-72"><a href="#cb22-72" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> get_correct_name(path[idx]) <span class="op">==</span> <span class="st">'Polish–Muscovite War (1605–1618)'</span>:</span>
<span id="cb22-73"><a href="#cb22-73" aria-hidden="true" tabindex="-1"></a>                    sim <span class="op">=</span> cosine_sim.loc[<span class="st">'Polish–Muscovite War (1605–1618)'</span>].drop_duplicates()[get_correct_name(path[<span class="op">-</span><span class="dv">1</span>])]</span>
<span id="cb22-74"><a href="#cb22-74" aria-hidden="true" tabindex="-1"></a>                    path_sims.append(sim)</span>
<span id="cb22-75"><a href="#cb22-75" aria-hidden="true" tabindex="-1"></a>                    </span>
<span id="cb22-76"><a href="#cb22-76" aria-hidden="true" tabindex="-1"></a>                <span class="cf">elif</span> get_correct_name(path[<span class="op">-</span><span class="dv">1</span>]) <span class="op">==</span> <span class="st">'Polish–Muscovite War (1605–1618)'</span>:</span>
<span id="cb22-77"><a href="#cb22-77" aria-hidden="true" tabindex="-1"></a>                    sim <span class="op">=</span> <span class="bu">float</span>(cosine_sim.loc[get_correct_name(path[idx])].drop_duplicates()[<span class="st">'Polish–Muscovite War (1605–1618)'</span>])</span>
<span id="cb22-78"><a href="#cb22-78" aria-hidden="true" tabindex="-1"></a>                    path_sims.append(sim)</span>
<span id="cb22-79"><a href="#cb22-79" aria-hidden="true" tabindex="-1"></a>                    </span>
<span id="cb22-80"><a href="#cb22-80" aria-hidden="true" tabindex="-1"></a>                <span class="cf">else</span>:</span>
<span id="cb22-81"><a href="#cb22-81" aria-hidden="true" tabindex="-1"></a>                    path_sims.append(matrix.loc[get_correct_name(path[idx])].loc[get_correct_name(path[<span class="op">-</span><span class="dv">1</span>])])</span>
<span id="cb22-82"><a href="#cb22-82" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-83"><a href="#cb22-83" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb22-84"><a href="#cb22-84" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">'Unsupported similarity method: choose from "sequential" or "target".'</span>)</span>
<span id="cb22-85"><a href="#cb22-85" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb22-86"><a href="#cb22-86" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> path_sims</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution_count="32">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(navigation_path.split(<span class="st">';'</span>))</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># show the "sequential" method</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>sequential_sims <span class="op">=</span> get_path_cosine_similarity(path<span class="op">=</span>navigation_path,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>                                             matrix<span class="op">=</span>cosine_sim,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>                                             method<span class="op">=</span><span class="st">'sequential'</span>)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co"># intepreted as:</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="co"># sim(14th_century, Time) = 0.031</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co"># sim(Time, Light) = 0.147</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co"># sim(Light, Rainbow) = 0.158</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="co"># the similarity list is always N-1 in length, N = # nodes</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>sequential_sims</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>['14th_century', 'Time', 'Light', 'Rainbow']</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>[0.03148221080256591, 0.14746128033868, 0.15783064270493327]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="33">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># show the "target" method</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>target_sims <span class="op">=</span> get_path_cosine_similarity(path<span class="op">=</span>navigation_path,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>                                         matrix<span class="op">=</span>cosine_sim,</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>                                         method<span class="op">=</span><span class="st">'target'</span>)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co"># intepreted as:</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co"># sim(14th_century, Rainbow) = 0.008</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="co"># sim(Time, Rainbow) = 0.035</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="co"># sim(Light, Rainbow) = 0.158</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="co"># sim(Rainbow, Rainbow) = 1 (the path was successful so similarity is 1)</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="co"># the similarity list is now N in length, N = # nodes</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="co"># note: paths where the last index != 1 means the path was unsuccessful</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>target_sims</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>     </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>[0.00764736982703648,
 0.03486926301697003,
 0.15783064270493327,
 1.0000000000000004]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="34">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate the "sequential" and "target" cosine similarities and augment the DataFrame with these metrics</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>final_df[<span class="st">'path_seq_cosine_sim'</span>] <span class="op">=</span> final_df[<span class="st">'path'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: get_path_cosine_similarity(x, matrix<span class="op">=</span>cosine_sim))</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>final_df[<span class="st">'path_target_cosine_sim'</span>] <span class="op">=</span> final_df[<span class="st">'path'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: get_path_cosine_similarity(x, matrix<span class="op">=</span>cosine_sim, method<span class="op">=</span><span class="st">'target'</span>))</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>final_df.head(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="34">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>path</th>
      <th>source_article</th>
      <th>target_article</th>
      <th>human_path_length</th>
      <th>shortest_path_length</th>
      <th>is_successful</th>
      <th>path_seq_cosine_sim</th>
      <th>path_target_cosine_sim</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>14th_century;Europe;Africa;Atlantic_slave_trad...</td>
      <td>14th_century</td>
      <td>African_slave_trade</td>
      <td>4</td>
      <td>3</td>
      <td>1</td>
      <td>[0.06712629693232745, 0.20733258691597292, 0.3...</td>
      <td>[0.030770302481984573, 0.1043890593428143, 0.3...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>14th_century;Europe;North_America;United_State...</td>
      <td>14th_century</td>
      <td>John_F._Kennedy</td>
      <td>5</td>
      <td>3</td>
      <td>1</td>
      <td>[0.06712629693232745, 0.17836530050620195, 0.3...</td>
      <td>[0.012741833088878754, 0.02487036054931131, 0....</td>
    </tr>
    <tr>
      <th>2</th>
      <td>14th_century;China;Gunpowder;Fire</td>
      <td>14th_century</td>
      <td>Fire</td>
      <td>3</td>
      <td>3</td>
      <td>1</td>
      <td>[0.06407585068130972, 0.0719709239718701, 0.07...</td>
      <td>[0.016703039404061093, 0.03765346608762515, 0....</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="35">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co"># next, write a function that returns whether the Cosine similarities in a navigation path are increasing/decreasing</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sims_to_bool_path(path: <span class="bu">str</span>):</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""this function takes a navgiation path as input and returns the path with same dimensions</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co">       containing Booleans denoting whether the Cosine similarity is increasing"""</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    bool_path <span class="op">=</span> []</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> idx <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(path)<span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> path[idx<span class="op">+</span><span class="dv">1</span>] <span class="op">&gt;</span> path[idx]:</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>            bool_path.append(<span class="va">True</span>)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>            bool_path.append(<span class="va">False</span>)</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> bool_path</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>        </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-execution_count="36">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>final_df[<span class="st">'path_seq_boolean'</span>] <span class="op">=</span> final_df[<span class="st">'path_seq_cosine_sim'</span>].<span class="bu">apply</span>(sims_to_bool_path)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>final_df[<span class="st">'path_target_boolean'</span>] <span class="op">=</span> final_df[<span class="st">'path_target_cosine_sim'</span>].<span class="bu">apply</span>(sims_to_bool_path)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>final_df.head(<span class="dv">3</span>)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>     </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="36">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>path</th>
      <th>source_article</th>
      <th>target_article</th>
      <th>human_path_length</th>
      <th>shortest_path_length</th>
      <th>is_successful</th>
      <th>path_seq_cosine_sim</th>
      <th>path_target_cosine_sim</th>
      <th>path_seq_boolean</th>
      <th>path_target_boolean</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>14th_century;Europe;Africa;Atlantic_slave_trad...</td>
      <td>14th_century</td>
      <td>African_slave_trade</td>
      <td>4</td>
      <td>3</td>
      <td>1</td>
      <td>[0.06712629693232745, 0.20733258691597292, 0.3...</td>
      <td>[0.030770302481984573, 0.1043890593428143, 0.3...</td>
      <td>[True, True, True]</td>
      <td>[True, True, True, True]</td>
    </tr>
    <tr>
      <th>1</th>
      <td>14th_century;Europe;North_America;United_State...</td>
      <td>14th_century</td>
      <td>John_F._Kennedy</td>
      <td>5</td>
      <td>3</td>
      <td>1</td>
      <td>[0.06712629693232745, 0.17836530050620195, 0.3...</td>
      <td>[0.012741833088878754, 0.02487036054931131, 0....</td>
      <td>[True, True, False, False]</td>
      <td>[True, True, True, True, True]</td>
    </tr>
    <tr>
      <th>2</th>
      <td>14th_century;China;Gunpowder;Fire</td>
      <td>14th_century</td>
      <td>Fire</td>
      <td>3</td>
      <td>3</td>
      <td>1</td>
      <td>[0.06407585068130972, 0.0719709239718701, 0.07...</td>
      <td>[0.016703039404061093, 0.03765346608762515, 0....</td>
      <td>[True, False]</td>
      <td>[True, True, True]</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="37">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this function filters paths that only contain strictly increasing Cosine similarities</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> filter_strictly_increasing_sims(path_list: <span class="bu">list</span>):</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">False</span> <span class="cf">if</span> <span class="va">False</span> <span class="kw">in</span> path_list <span class="cf">else</span> <span class="va">True</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>final_df[<span class="st">'seq_strictly_increasing'</span>] <span class="op">=</span> final_df[<span class="st">'path_seq_boolean'</span>].<span class="bu">apply</span>(filter_strictly_increasing_sims)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>final_df[<span class="st">'target_strictly_increasing'</span>] <span class="op">=</span> final_df[<span class="st">'path_target_boolean'</span>].<span class="bu">apply</span>(filter_strictly_increasing_sims)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>final_df.head(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="37">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>path</th>
      <th>source_article</th>
      <th>target_article</th>
      <th>human_path_length</th>
      <th>shortest_path_length</th>
      <th>is_successful</th>
      <th>path_seq_cosine_sim</th>
      <th>path_target_cosine_sim</th>
      <th>path_seq_boolean</th>
      <th>path_target_boolean</th>
      <th>seq_strictly_increasing</th>
      <th>target_strictly_increasing</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>14th_century;Europe;Africa;Atlantic_slave_trad...</td>
      <td>14th_century</td>
      <td>African_slave_trade</td>
      <td>4</td>
      <td>3</td>
      <td>1</td>
      <td>[0.06712629693232745, 0.20733258691597292, 0.3...</td>
      <td>[0.030770302481984573, 0.1043890593428143, 0.3...</td>
      <td>[True, True, True]</td>
      <td>[True, True, True, True]</td>
      <td>True</td>
      <td>True</td>
    </tr>
    <tr>
      <th>1</th>
      <td>14th_century;Europe;North_America;United_State...</td>
      <td>14th_century</td>
      <td>John_F._Kennedy</td>
      <td>5</td>
      <td>3</td>
      <td>1</td>
      <td>[0.06712629693232745, 0.17836530050620195, 0.3...</td>
      <td>[0.012741833088878754, 0.02487036054931131, 0....</td>
      <td>[True, True, False, False]</td>
      <td>[True, True, True, True, True]</td>
      <td>False</td>
      <td>True</td>
    </tr>
    <tr>
      <th>2</th>
      <td>14th_century;China;Gunpowder;Fire</td>
      <td>14th_century</td>
      <td>Fire</td>
      <td>3</td>
      <td>3</td>
      <td>1</td>
      <td>[0.06407585068130972, 0.0719709239718701, 0.07...</td>
      <td>[0.016703039404061093, 0.03765346608762515, 0....</td>
      <td>[True, False]</td>
      <td>[True, True, True]</td>
      <td>False</td>
      <td>True</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="39">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co"># the matching algorithm requires some computation time</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># compute the matched DataFrames all at once and save them so they can be read into memory directly</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="co"># there are 2 treatments</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="co">#    1. strictly increasing *sequential* Cosine similarity</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="co">#    2. strictly increasing *target* Cosine similarity</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="co"># there are also 3 conditions we filter on</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="co">#    1. human_path_length = 3</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="co">#    2. human_path_length = 4</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="co">#    3. human_path_length = 5</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> networkx <span class="im">as</span> nx</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> treatment <span class="kw">in</span> [<span class="st">'seq_strictly_increasing'</span>, <span class="st">'target_strictly_increasing'</span>]:</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> length <span class="kw">in</span> [<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>]:</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>        treatment_df <span class="op">=</span> final_df[final_df[treatment] <span class="op">==</span> <span class="va">True</span>]</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>        control_df <span class="op">=</span> final_df[final_df[treatment] <span class="op">==</span> <span class="va">False</span>]</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>        G <span class="op">=</span> nx.Graph()</span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> control_id, control_row <span class="kw">in</span> control_df.iterrows():</span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> treatment_id, treatment_row <span class="kw">in</span> treatment_df.iterrows():</span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Adds an edge only for the same human path length</span></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> (control_row[<span class="st">'human_path_length'</span>] <span class="op">==</span> length <span class="kw">and</span> treatment_row[<span class="st">'human_path_length'</span>] <span class="op">==</span> length):</span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>                    G.add_edge(control_id, treatment_id)</span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>        matching <span class="op">=</span> nx.max_weight_matching(G)</span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a>        matched <span class="op">=</span> [i[<span class="dv">0</span>] <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">list</span>(matching)] <span class="op">+</span> [i[<span class="dv">1</span>] <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">list</span>(matching)]</span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a>        balanced_df <span class="op">=</span> final_df.iloc[matched]</span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a>        <span class="co"># save balanced_df</span></span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a>        balanced_df.to_csv(<span class="ss">f'</span><span class="sc">{</span>treatment<span class="sc">}</span><span class="ss">_</span><span class="sc">{</span>length<span class="sc">}</span><span class="ss">.csv'</span>)</span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a>     </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>KeyboardInterrupt: </code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co"># next, perform logistic regression on each treatment with fixed human path length</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co"># read all the matched DataFrames into memory</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>df_seq_3 <span class="op">=</span> pd.read_csv(<span class="st">'seq_strictly_increasing_3.csv'</span>)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>df_seq_4 <span class="op">=</span> pd.read_csv(<span class="st">'seq_strictly_increasing_4.csv'</span>)</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>df_seq_5 <span class="op">=</span> pd.read_csv(<span class="st">'seq_strictly_increasing_5.csv'</span>)</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>df_target_3 <span class="op">=</span> pd.read_csv(<span class="st">'target_strictly_increasing_3.csv'</span>)</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>df_target_4 <span class="op">=</span> pd.read_csv(<span class="st">'target_strictly_increasing_4.csv'</span>)</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>df_target_5 <span class="op">=</span> pd.read_csv(<span class="st">'target_strictly_increasing_5.csv'</span>)</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a><span class="co"># store all results in a dictionary</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> {}</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.formula.api <span class="im">as</span> smf</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> df, experiment_name <span class="kw">in</span> <span class="bu">zip</span>([df_seq_3, df_seq_4, df_seq_5, df_target_3, df_target_4, df_target_5],</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>                               [<span class="st">'Sequential 3'</span>, <span class="st">'Sequential 4'</span>, <span class="st">'Sequential 5'</span>, <span class="st">'Target 3'</span>, <span class="st">'Target 4'</span>, <span class="st">'Target 5'</span>]):</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">'Sequential'</span> <span class="kw">in</span> experiment_name:</span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>        mod <span class="op">=</span> smf.logit(formula<span class="op">=</span><span class="st">'is_successful ~  seq_strictly_increasing'</span>, data<span class="op">=</span>df)</span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a>        mod <span class="op">=</span> smf.logit(formula<span class="op">=</span><span class="st">'is_successful ~  target_strictly_increasing'</span>, data<span class="op">=</span>df)</span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> mod.fit()</span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># dictionary to store the coefficients and p-values of the current experiment</span></span>
<span id="cb34-30"><a href="#cb34-30" aria-hidden="true" tabindex="-1"></a>    curr_analysis <span class="op">=</span> {}</span>
<span id="cb34-31"><a href="#cb34-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># store the intercept</span></span>
<span id="cb34-32"><a href="#cb34-32" aria-hidden="true" tabindex="-1"></a>    curr_analysis[<span class="st">'Intercept'</span>] <span class="op">=</span> res.params[<span class="dv">0</span>]</span>
<span id="cb34-33"><a href="#cb34-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># store the intercept p-value</span></span>
<span id="cb34-34"><a href="#cb34-34" aria-hidden="true" tabindex="-1"></a>    curr_analysis[<span class="st">'Intercept p-value'</span>] <span class="op">=</span> res.pvalues[<span class="dv">0</span>]</span>
<span id="cb34-35"><a href="#cb34-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># store the coefficient for **strictly increasing Cosine similarity**</span></span>
<span id="cb34-36"><a href="#cb34-36" aria-hidden="true" tabindex="-1"></a>    curr_analysis[<span class="st">'Coefficient'</span>] <span class="op">=</span> res.params[<span class="dv">1</span>]</span>
<span id="cb34-37"><a href="#cb34-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># store the coefficient p-value</span></span>
<span id="cb34-38"><a href="#cb34-38" aria-hidden="true" tabindex="-1"></a>    curr_analysis[<span class="st">'Coefficient p-value'</span>] <span class="op">=</span> res.pvalues[<span class="dv">1</span>]</span>
<span id="cb34-39"><a href="#cb34-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-40"><a href="#cb34-40" aria-hidden="true" tabindex="-1"></a>    results[experiment_name] <span class="op">=</span> curr_analysis</span>
<span id="cb34-41"><a href="#cb34-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-42"><a href="#cb34-42" aria-hidden="true" tabindex="-1"></a>results_df <span class="op">=</span> pd.DataFrame(results)</span>
<span id="cb34-43"><a href="#cb34-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-44"><a href="#cb34-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-45"><a href="#cb34-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-46"><a href="#cb34-46" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb34-47"><a href="#cb34-47" aria-hidden="true" tabindex="-1"></a>results_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The syntax in the above table is interpreted as :</p>
<pre><code>Sequential means the strictly increasing Cosine similarity was measured for sequential articles
Target means the strictly increasing Cosine similarity was measured based on sequential article compared to the target article
The number indicates the human path length fixed. Previously, we also fixed that the shortest path length is 3.</code></pre>
<p>Our research question is:</p>
<p><em>When given X number of choices in the same difficulty game, how did successful and unsuccessful players differ in their clicking behaviour?</em></p>
<p>Based on the above table, the p-values for both the incercept and coefficient for logistic regression are significant for all experiments except 1 (Sequential 5). The interpretation for all experiment findings are similar. Concretely, consider the experiment Sequential 3. The interpretation is:</p>
<pre><code>*Given a shortest path length of 3 (fixed difficulty) and given a human path length of 3 (when the human makes 3 choices on article clicks), clicking articles with increasing Cosine similarity between sequential articles (as a proxy to measure semantic meaning), leads to more successful outcomes.*</code></pre>
<p>For Target experiments have a similar interpretation. Concretely, consider the experiment Target 5:</p>
<pre><code>*Given a shortest path length of 3 (fixed difficulty) and given a human path length of 5 (when the human makes 5 choices on article clicks), clicking articles with increasing Cosine similarity between the current article and the target article (as a proxy to measure semantic meaning), leads to more successful outcomes.*</code></pre>
<p>These findings are interesting and suggest that (potentially contrarily to common sense) clicking articles based on semantic meaning can lead to more successful outcomes in the Wikispeedia game (at least the current version we are investigating).</p>
<div class="cell" data-execution_count="1">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="dv">2</span>, <span class="fl">0.01</span>)</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>theta <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> np.pi <span class="op">*</span> r</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  subplot_kw <span class="op">=</span> {<span class="st">'projection'</span>: <span class="st">'polar'</span>} </span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>ax.plot(theta, r)</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>ax.set_rticks([<span class="fl">0.5</span>, <span class="dv">1</span>, <span class="fl">1.5</span>, <span class="dv">2</span>])</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>ax.grid(<span class="va">True</span>)</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-polar" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="datastory_files/figure-html/fig-polar-output-1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: A line plot on a polar axis</figcaption><p></p>
</figure>
</div>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>